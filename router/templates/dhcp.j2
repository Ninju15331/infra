config dnsmasq
    option domainneeded '1'
    option localise_queries '1'
    option rebind_protection '1'
    option rebind_localhost '1'
    option local '/lan/local/'
    option domain 'lan'
    option expandhosts '1'
    option cachesize '1000'
    option authoritative '1'
    option readethers '1'
    option leasefile '/tmp/dhcp.leases'
    option resolvfile '/tmp/resolv.conf.d/resolv.conf.auto'
    option localservice '1'
    option ednspacket_max '1232'
    list address '/router.lan/{{ router.dhcp.router_ipv4 }}'
    list address '/router.lan/{{ router.dhcp.router_ula }}'

config dhcp 'lan'
    option interface 'lan'
    option start '100'
    option limit '150'
    option leasetime '12h'
    option dhcpv4 'server'
    option ra 'server'
    option dhcpv6 'server'
    list ra_flags 'managed-config'
    list ra_flags 'other-config'

config dhcp 'wan'
    option interface 'wan'
    option ignore '1'

config odhcpd 'odhcpd'
    option maindhcp '0'
    option leasefile '/tmp/hosts/odhcpd'
    option leasetrigger '/usr/sbin/odhcpd-update'
    option loglevel '4'
    option piofolder '/tmp/odhcpd-piofolder'

{% for host in router.dhcp.static_hosts | default([]) %}
config host
    option name '{{ host.name }}'
    option ip '{{ host.ip }}'
    option mac '{{ host.mac }}'

{% endfor %}
config dhcp 'wan6'
    option interface 'wan6'
    option ignore '1'

config dhcp 'guest'
    option interface 'guest'
    option start '100'
    option limit '150'
    option leasetime '12h'
    option ra 'server'
    option dhcpv6 'server'

config domain
    option name 'router.lan'
    option ip '{{ router.dhcp.router_ipv4 }}'

config domain
    option name 'router.lan'
    option ip '{{ router.dhcp.router_ula }}'
